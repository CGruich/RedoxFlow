# RedoxFlow
RedoxFlox is an agentic proof-of-concept that generates chemicals en-masse and prepares the needed simulation scripts for calculating thermodynamic redox potential. The project aims to show how redox potential calculation can be automated for high-throughput electrochemical search and discovery.

A common strategy for calculating redox potential of a solvated molecule is to (1) define a model reaction and (2) perform a thermocycle calculation to derive the solvated free energy and by extension the redox potential. Because this approach is a template calculation from molecule-to-molecule, an agentic AI can automate simulation script preparation for this template en-masse for large-scale chemical search and discovery.

**Installation & Demonstration**
---
`cd RedoxFlow`
`mamba env create -p ../redoxflow -f ./env/redoxflow.yml`
`conda activate ../redoxflow`

Demonstration:
`RedoxFlow/scripts/agent_interface_local_simplified.ipynb`

**Background**
---
Redox potential quantifies how willing an organic chemical is to being reduced or oxidized. It is useful in many electrochemical applications, such as:

* Batteries & Flow Batteries (e.g., anode/cathode couple selection, screening redox-active electrolytes/mediators)
* Photosensors & Bioelectrochemistry (e.g., select an organic via redox potential that avoids oxygen/hydrogen interference)
* Environmental Electrochemistry (e.g., quantify the redox potential of contaminants to predict likelihood of harmful byproducts)
* Redox-swing Separations & CO2 Capture (e.g., select redox potential to quantify the binding/unbinding window for chemical separations)

A common method for computing redox potentials is the computational hydrogen electrode (CHE) method. Using this method amounts to calculating a thermocycle. 

Such a thermocycle is arduous by-hand and not conducive to high-throughput chemistry workflows. 

For a model reduction reaction `A + xH^+ + ye^- → B`, a researcher typically must: 

* (1) Prepare one composite or multiple simulation scripts to gemoetry optimize  `A`
* (2) Prepare a simulation script for `B`
* (3) Conformer search `A` and `B` to determine reasonable initial geometries for the molecules
* (6) Run the simulations
* (7) Extract the relevant variables from simulations
* (8) Calculate the redox potential `E = -ΔG/zF`, where `E` is redox potential, `ΔG` is solvated free energy of reaction derived from simulations, `z` is the number of participating electrons, and `F` is Faraday's constant.

 RedoxFlow automates simulation preparation (i.e., steps (1)-(5)) and redox potential calculation (i.e., steps (7), (8)). 

Simulation scripts are auto-generated by:
* (1) Generating reactants via a foundational model (ibm-research/GP-MoLFormer-Uniq) designed for _de novo_ generation of molecules
* (2) Predicting an array of reduced products (in our proof-of-concept, using transparent reaction rules)
* (3) Conformer searching the reactants/products
* (4) Writing the lowest energy conformers and associated simulation scripts to disk
---
The researcher has access to several knobs that control the chemical diversity of generated reactants (see demonstration). The agent is loaded directly from `redoxflow.json` and thus can be deployed locally or on HPC filesystems to prepare simulations. The foundational model used by the agent to generate reactants is ~46.8 million parameters, lightweight and adaptable to local machine or cluster for CPU or GPU usage.

**Memory**
Upon first-use, the agent creates persistent memory to remember generated reactants (`RedoxFlow/memory/reactants_memory.csv`) and products (`RedoxFlow/memory/product_memory.csv`). Reaction rules (`RedoxFlow/scripts/reactions.json`) can be transparently adjusted to tailor predicted products. 

**Proof-of-Concept Restrictions:**

To show that the agentic workflow works start-to-finish, we restrict our agent to only prepare simulation scripts for:
* CNOF-containing molecules
* A model reduction reaction `A + xH^+ + ye^- → B`
    * No degradation products considered
    * By nature of the model reaction, we only consider PCET-reactions.

For a round-trip demonstration of redox potential calculation with the agent/embedded class interface, we:
* Generate 10 simulations (5 reactants/5 products) and thus 5 redox potentials
    * PBE Functional
    * def2-SV(P) basis set
    * Pure water (dielectric constant ~ 78.4)
    * Room temperature

Importance of Redox Potentials

Redox potentials are quantities that represent how easily oxidizable or reducible an organic chemical is. 
